---
mathjax: false
title: 有道云笔记markdown文档插入图片
date: 2018-03-27 16:35:22
---

阶段性地优雅地解决了这个问题！

前段时间因为印象笔记同步出错我不得不购买其高级版本来恢复历史，但是它随着内容增多日渐卡顿这一点令人愈发难以忍受，此外，不支持markdown也一直如鲠在喉，于是我决定再试试之前因为广告问题不愿多用的有道云笔记，竟然发现它非常流畅，支持多层级目录，支持markdown，界面优雅，这让印象笔记之于它就像IE之于Chrome，没办法，我想我只能选择Chrome。

但是有道云也有些小问题，一是markdown不支持直接使用本地图片，二是不支持公式渲染。总的来说，它的markdown编辑功能和Typora比起来简直是小巫见大巫。稍加探索，发现一个有趣的情况，就是有道云笔记新建的markdown笔记就是以同名markdown格式文件保存在本地的，这样一来不就可以用Typora直接编辑了？

所以以后记笔记的工作流就变成了：

打开有道云笔记=>新建markdown笔记foo.md=>使用神器Everything搜索foo.md=>用默认关联md文件的Typora打开=>编辑md文件=>回到有道云笔记，刷新文件预览（点到别的笔记，再回到`foo.md`，文件内容会重新加载）

非常完美。

Typora从`0.9.47`版本左右开始支持直接粘贴剪贴板图片，默认以时间戳为文件名保存到temp文件夹（可以在 `偏好设置->编辑器->图片插入` 中设置默认保存位置）来引用，并且支持直接复制到其他文件夹，真是非常棒的体验，必须感谢开发者！

另外，有道云不支持`C:\foo\bar.jpg` 的引用，但是`C:/foo/bar/jpg` 却可以被识别；Typora两者都可以识别。

所以当我们回到插入图片的问题，就会发现这不是问题了。只要在Typora编辑完毕后将所有图片复制到一个目录（比如`C:/foo/ynote/img`）下（如果后续Typora图片粘贴加入了自定义任意文件夹的功能，那么复制这一步也可省去了），然后`CTRL+H` 将所有图片引用地址中的目录部分一键替换成有道云笔记可解析的形式（如将`C:/Users/PCName/AppData/Local/Temp/`替换成`C:\foo\ynote\img\`），这样在有道云笔记和Typora中就都可以预览了。

那么`C:/foo/ynote/img` 下的图片岂不是就不可以同步了，是的，但比起清爽的体验这只是小节了，我们可以把该目录用坚果云等同步软件同步一下就好了。

话说回来，`坚果云+Typora+本地文件系统` 不就够了，还要什么自行车？